import{$ as ce,A as N,Aa as h,B as p,C as oe,D as v,E as a,F as g,G as c,H as C,I as re,J as H,K as L,L as T,M as Y,P as y,Q as B,R as U,S as se,U as O,V as S,W as k,X as le,Y as de,Z as R,ca as me,ea as z,fa as ie,g as D,ha as V,i as M,j as P,ja as J,la as j,n as s,na as W,o as x,p as b,q as A,r as u,t as d,u as n,ua as G,v as t,va as $,w as l,ya as ue,z as F}from"./chunk-KDUBUO2O.js";function be(o,i){o&1&&(n(0,"span",32),a(1,"(Fully Paid)"),t())}function he(o,i){o&1&&(n(0,"span",32),a(1,"(Cleared)"),t())}function xe(o,i){if(o&1&&(n(0,"div",13)(1,"h5"),a(2,"Hostel Fees"),t(),n(3,"div",14)(4,"span",15),a(5,"Total Fee:"),t(),n(6,"span",16),a(7),t()(),n(8,"div",14)(9,"span",15),a(10,"Amount Paid:"),t(),n(11,"span",17),a(12),t()(),n(13,"div",14)(14,"span",15),a(15,"Amount Due:"),t(),n(16,"span",33),a(17),t()()()),o&2){let e=p();s(7),c("\u20B9",e.totalHostelFee),s(5),c("\u20B9",e.hostelAmountPaid),s(5),c("\u20B9",e.hostelAmountDue)}}function _e(o,i){o&1&&(n(0,"a",34),a(1," Pay College Fees "),t())}function ve(o,i){o&1&&(n(0,"a",35),a(1," Pay Hostel Fees "),t())}function Ce(o,i){o&1&&(n(0,"p"),a(1,"Not allocated to hostel"),t())}function ye(o,i){if(o&1&&(n(0,"p"),a(1),l(2,"br"),a(3),t()),o&2){let e=p();s(),C(" Your hostel room: ",e.student.hostel==null?null:e.student.hostel.block," - ",e.student.hostel==null?null:e.student.hostel.roomNo),s(2),c(" Hostel fees: ",e.student.hostel.fees.paid?"Paid":"Due (\u20B9"+e.student.hostel.fees.amount+")"," ")}}function Me(o,i){if(o&1&&(n(0,"p"),a(1),y(2,"date"),t()),o&2){let e=p();s(),C(" Last payment: \u20B9",e.lastPayment.amount," on ",B(2,2,e.lastPayment.date)," ")}}var Q=class o{constructor(i){this.dataService=i}student;averageMarks=0;paymentHistory=[];totalCollegeFee=5e4;collegeAmountPaid=0;collegeAmountDue=0;collegeFeePaid=!1;isHostelAllocated=!1;totalHostelFee=0;hostelAmountPaid=0;hostelAmountDue=0;hostelFeePaid=!1;lastUserData=null;lastPaymentData=null;updateInterval;ngOnInit(){this.loadStudentData(),this.checkForUpdates(),this.checkForUpdates(),this.updateInterval=setInterval(()=>this.checkForUpdates(),1e3);let i=localStorage.getItem("studentUser"),e=i?JSON.parse(i):{};if(e.role==="student"&&e.id){this.student=this.dataService.getStudentById(e.id),this.paymentHistory=JSON.parse(localStorage.getItem("paymentHistory")||"[]").filter(m=>m.studentId===this.student.id).reverse();let r=Object.values(this.student.marks);r.length>0&&(this.averageMarks=r.reduce((m,f)=>m+f,0)/r.length),this.hostelFeePaid=this.student?.hostel?.fees?.paid||!1,this.collegeFeePaid=this.student.fees.paid,this.calculateFees()}}ngOnDestroy(){this.updateInterval&&clearInterval(this.updateInterval)}checkForUpdates(){let i=localStorage.getItem("studentUser"),e=localStorage.getItem("paymentHistory");(i!==this.lastUserData||e!==this.lastPaymentData)&&(this.loadStudentData(),this.lastUserData=i,this.lastPaymentData=e)}get lastPayment(){return this.paymentHistory[0]||null}loadStudentData(){let i=localStorage.getItem("studentUser"),e=i?JSON.parse(i):{};e.role==="student"&&e.id&&(this.student=this.dataService.getStudentById(e.id),this.paymentHistory=JSON.parse(localStorage.getItem("paymentHistory")||"[]").filter(r=>r.studentId===e.id).reverse(),this.calculateFees(),this.lastUserData=i,this.lastPaymentData=localStorage.getItem("paymentHistory"))}calculateFees(){if(this.student)if(this.totalCollegeFee=this.student.fees?.totalAmount||this.getDefaultCollegeFee(),this.student.fees?.paid?(this.collegeAmountPaid=this.totalCollegeFee,this.collegeAmountDue=0):(this.collegeAmountPaid=this.paymentHistory.filter(i=>i.type==="college").reduce((i,e)=>i+e.amount,0),this.collegeAmountDue=Math.max(0,this.totalCollegeFee-this.collegeAmountPaid)),this.collegeFeePaid=this.collegeAmountDue<=0,this.student.hostel?.allocated){this.isHostelAllocated=!0,this.totalHostelFee=this.student.hostel.fees.totalAmount||1e4;let i=this.paymentHistory.filter(e=>e.type==="hostel").reduce((e,r)=>e+r.amount,0);this.hostelAmountPaid=i,this.hostelAmountDue=this.totalHostelFee-i,this.hostelFeePaid=this.hostelAmountDue<=0}else this.isHostelAllocated=!1,this.totalHostelFee=0,this.hostelAmountPaid=0,this.hostelAmountDue=0}getDefaultCollegeFee(){let i=this.student?.department;return{CSE:5e4,AIML:55e3,IT:52e3,ECE:48e3,EEE:45e3,MECH:4e4,CIVIL:38e3}[i]||5e4}get collegeFeeStatus(){return this.student?this.collegeFeePaid?"Fully Paid":`Due: \u20B9${this.collegeAmountDue}`:"Loading..."}get hostelFeeStatus(){return this.student?.hostel?.allocated?this.hostelFeePaid?"Fully Paid":`Due: \u20B9${this.hostelAmountDue}`:"Not Allocated"}static \u0275fac=function(e){return new(e||o)(x(h))};static \u0275cmp=b({type:o,selectors:[["app-studentdashboard"]],standalone:!1,decls:102,vars:29,consts:[[1,"container","mt-4"],[1,"row","mt-4"],[1,"col-md-4"],[1,"card","text-white","bg-primary","mb-3"],[1,"card-body"],[1,"card-title"],[1,"card-text","display-4"],[1,"card","text-white","bg-success","mb-3"],[1,"card","text-white","bg-info","mb-3"],[3,"ngClass"],[1,"card","mt-4"],[1,"card-header","bg-dark","text-white"],[1,"row"],[1,"col-md-6"],[1,"fee-row"],[1,"fee-label"],[1,"fee-value"],[1,"fee-value","paid"],["class","text-success",4,"ngIf"],["class","col-md-6",4,"ngIf"],[1,"card"],[1,"card-header","bg-primary","text-white"],["routerLink","/student/fees","class","btn btn-sm btn-outline-primary",4,"ngIf"],[1,"card-header","bg-info","text-white"],["routerLink","/student/hostel","class","btn btn-sm btn-outline-info",4,"ngIf"],[4,"ngIf"],[1,"list-group","list-group-flush"],["routerLink","/student/courses",1,"list-group-item","list-group-item-action"],["routerLink","/student/marks",1,"list-group-item","list-group-item-action"],["routerLink","/student/fees",1,"list-group-item","list-group-item-action"],["routerLink","/student/hostel",1,"list-group-item","list-group-item-action"],[1,"col-md-8"],[1,"text-success"],[1,"fee-value","due"],["routerLink","/student/fees",1,"btn","btn-sm","btn-outline-primary"],["routerLink","/student/hostel",1,"btn","btn-sm","btn-outline-info"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h2"),a(2,"Student Dashboard"),t(),n(3,"p"),a(4),t(),n(5,"div",1)(6,"div",2)(7,"div",3)(8,"div",4)(9,"h5",5),a(10,"Courses"),t(),n(11,"p",6),a(12),t()()()(),n(13,"div",2)(14,"div",7)(15,"div",4)(16,"h5",5),a(17,"Average Marks"),t(),n(18,"p",6),a(19),y(20,"number"),t()()()(),n(21,"div",2)(22,"div",8)(23,"div",4)(24,"h5",5),a(25,"Fees Status"),t(),n(26,"p",6)(27,"span",9),a(28),t()()()()()(),n(29,"div",10)(30,"div",11),a(31,"Fee Summary"),t(),n(32,"div",4)(33,"div",12)(34,"div",13)(35,"h5"),a(36,"College Fees"),t(),n(37,"div",14)(38,"span",15),a(39,"Total Fee:"),t(),n(40,"span",16),a(41),t()(),n(42,"div",14)(43,"span",15),a(44,"Amount Paid:"),t(),n(45,"span",17),a(46),u(47,be,2,0,"span",18),t()(),n(48,"div",14)(49,"span",15),a(50,"Amount Due:"),t(),n(51,"span",16),a(52),u(53,he,2,0,"span",18),t()()(),u(54,xe,18,3,"div",19),t()()(),n(55,"div",1)(56,"div",13)(57,"div",20)(58,"div",21),a(59," College Fees "),t(),n(60,"div",4)(61,"p")(62,"strong"),a(63,"Status:"),t(),a(64),t(),u(65,_e,2,0,"a",22),t()()(),n(66,"div",13)(67,"div",20)(68,"div",23),a(69," Hostel Fees "),t(),n(70,"div",4)(71,"p")(72,"strong"),a(73,"Status:"),t(),a(74),t(),u(75,ve,2,0,"a",24)(76,Ce,2,0,"p",25),t()()()(),n(77,"div",1)(78,"div",2)(79,"div",20)(80,"div",11),a(81,"Quick Links"),t(),n(82,"div",26)(83,"a",27),a(84,"My Courses"),t(),n(85,"a",28),a(86,"My Marks"),t(),n(87,"a",29),a(88,"Fee Details"),t(),n(89,"a",30),a(90,"Hostel Details"),t()()()(),n(91,"div",31)(92,"div",20)(93,"div",11),a(94,"Recent Activities"),t(),n(95,"div",4)(96,"p"),a(97),t(),u(98,ye,4,3,"p",25),n(99,"p"),a(100),t(),u(101,Me,3,4,"p",25),t()()()()()),e&2&&(s(4),re(" Welcome, ",r.student.name," (",r.student.department," - Year ",r.student.year,") "),s(8),g(r.student.courses.length),s(7),c("",U(20,26,r.averageMarks,"1.0-0"),"%"),s(8),d("ngClass",r.student.fees.paid?"text-success":"text-danger"),s(),c(" ",r.student.fees.paid?"Paid":"Due"," "),s(13),c("\u20B9",r.totalCollegeFee),s(5),c(" \u20B9",r.collegeAmountPaid," "),s(),d("ngIf",r.collegeFeePaid),s(4),v("text-danger",r.collegeAmountDue>0)("text-success",r.collegeAmountDue===0),s(),c(" \u20B9",r.collegeAmountDue," "),s(),d("ngIf",r.collegeAmountDue===0),s(),d("ngIf",r.student==null||r.student.hostel==null?null:r.student.hostel.allocated),s(10),c(" ",!(r.student==null||r.student.fees==null)&&r.student.fees.paid?"Fully Paid":"Due: \u20B9"+(((r.student==null||r.student.fees==null?null:r.student.fees.totalAmount)||r.totalCollegeFee)-r.collegeAmountPaid)," "),s(),d("ngIf",!(!(r.student==null||r.student.fees==null)&&r.student.fees.paid)),s(9),c(" ",r.hostelFeeStatus),s(),d("ngIf",(r.student==null||r.student.hostel==null?null:r.student.hostel.allocated)&&!r.hostelFeePaid),s(),d("ngIf",!(!(r.student==null||r.student.hostel==null)&&r.student.hostel.allocated)),s(21),c("You are enrolled in ",r.student.courses.length," courses this semester."),s(),d("ngIf",r.student==null?null:r.student.hostel),s(2),c(" College fees: ",r.student.fees.paid?"Paid":"Due (\u20B9"+r.student.fees.amount+")"," "),s(),d("ngIf",r.lastPayment))},dependencies:[O,k,z,R,de],styles:["body[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f1f1f,#2e2e2e);color:#d0d0d0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.container[_ngcontent-%COMP%]{color:#ccc;padding-bottom:50px}.card[_ngcontent-%COMP%]{background:#1e1e1eb3;border:1px solid rgba(255,255,255,.08);border-radius:15px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);box-shadow:0 8px 16px #0006;color:#dcdcdc;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.015);box-shadow:0 12px 24px #0009}.card-header[_ngcontent-%COMP%]{background:#0009;font-weight:600;color:#f0932b;border-bottom:1px solid rgba(255,255,255,.1)}.bg-primary[_ngcontent-%COMP%]{background:linear-gradient(to right,#0d47a1,#1976d2)!important}.bg-success[_ngcontent-%COMP%]{background:linear-gradient(to right,#2e7d32,#43a047)!important}.bg-info[_ngcontent-%COMP%]{background:linear-gradient(to right,#006064,#0097a7)!important}.bg-dark[_ngcontent-%COMP%]{background:linear-gradient(to right,#212121,#424242)!important}.display-4[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#fbc02d}.fee-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:6px 0;font-size:1rem}.fee-label[_ngcontent-%COMP%]{font-weight:500;color:#90caf9}.fee-value[_ngcontent-%COMP%]{font-weight:700;color:#e0e0e0}.fee-value.paid[_ngcontent-%COMP%]{color:#66bb6a}.fee-value.due[_ngcontent-%COMP%]{color:#ef5350}.btn-outline-primary[_ngcontent-%COMP%], .btn-outline-info[_ngcontent-%COMP%]{border-radius:20px;color:#ffca28;border-color:#ffca28;transition:all .3s ease}.btn-outline-primary[_ngcontent-%COMP%]:hover, .btn-outline-info[_ngcontent-%COMP%]:hover{background-color:#ffca28;color:#1f1f1f;transform:scale(1.05)}.list-group-item[_ngcontent-%COMP%]{background-color:#ffffff08;color:#f0ad4e;transition:all .3s ease;border:none}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#ffffff14;color:#ffa726;transform:translate(5px)}h2[_ngcontent-%COMP%], h5[_ngcontent-%COMP%]{font-weight:700;color:#fbc02d;text-shadow:1px 1px 3px rgba(0,0,0,.5)}.card[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.display-4[_ngcontent-%COMP%]{font-size:2rem}}"]})};var q=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=b({type:o,selectors:[["app-studentnavbar"]],standalone:!1,decls:40,vars:0,consts:[[1,"container-fluid"],[1,"row","min-vh-100"],[1,"col-md-2","text-white","p-0",2,"background-color","#c6c6ec"],[1,"navbar","navbar-expand-lg","navbar-dark","flex-column","p-3","sidebar"],["href","#",1,"navbar-brand","mb-4","text-center"],["src","/logo.png","alt","Logo","width","100","height","100",1,"d-inline-block"],[1,"navbar-nav","flex-column","w-100"],[1,"radio-container","sidebar-radio"],["id","nav-dashboard","name","nav","type","radio","checked",""],["for","nav-dashboard","routerLink","/student/studenthome"],[1,"bi","bi-speedometer2","me-2"],["id","nav-courses","name","nav","type","radio"],["for","nav-courses","routerLink","/student/courses"],["for","nav-courses","routerLink","/student/marks"],["id","nav-teachers","name","nav","type","radio"],["for","nav-teachers","routerLink","/student/fees"],["id","nav-students","name","nav","type","radio"],["for","nav-students","routerLink","/student/hostel"],["for","nav-students","routerLink","/student/attendances"],["id","nav-logout","name","nav","type","radio"],["for","nav-logout","routerLink","/logout"],[1,"bi","bi-box-arrow-right","me-2"],[1,"glider-container"],[1,"glider"],[1,"col-md-10","p-4"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"a",4),l(5,"img",5),t(),n(6,"ul",6)(7,"div",7),l(8,"input",8),n(9,"label",9),l(10,"i",10),a(11," Home "),t(),l(12,"input",11),n(13,"label",12),l(14,"i",10),a(15," Courses "),t(),l(16,"input",11),n(17,"label",13),l(18,"i",10),a(19," Marks "),t(),l(20,"input",14),n(21,"label",15),l(22,"i",10),a(23," Fees "),t(),l(24,"input",16),n(25,"label",17),l(26,"i",10),a(27," Hostel "),t(),l(28,"input",16),n(29,"label",18),l(30,"i",10),a(31," Attendances "),t(),l(32,"input",19),n(33,"label",20),l(34,"i",21),a(35," Logout "),t(),n(36,"div",22),l(37,"div",23),t()()()()(),n(38,"div",24),l(39,"router-outlet"),t()()())},dependencies:[me,z],styles:['.sidebar-radio[_ngcontent-%COMP%]{--main-color: #f7e479;--main-color-opacity: #f7e4791c;display:flex;flex-direction:column;padding-left:1rem;position:relative;margin-top:2rem;height:100%}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{appearance:none;cursor:pointer}.sidebar-radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;padding:1rem;color:#000;font-size:16px;font-weight:500;transition:all .3s ease;display:flex;align-items:center;gap:10px;position:relative}.sidebar-radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{color:#fff;transform:translate(5px)}.sidebar-radio[_ngcontent-%COMP%]   .glider-container[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;background:linear-gradient(0deg,transparent 0%,#1b1b1b 50%,transparent 100%);width:2px}.sidebar-radio[_ngcontent-%COMP%]   .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{position:relative;height:calc(100% / var(--total-radio));width:100%;background:linear-gradient(0deg,transparent 0%,var(--main-color) 50%,transparent 100%);transition:transform .4s cubic-bezier(.37,1.95,.66,.56)}.sidebar-radio[_ngcontent-%COMP%]   .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]:before{content:"";position:absolute;height:60%;width:300%;top:50%;transform:translateY(-50%);background:var(--main-color);filter:blur(10px)}.sidebar-radio[_ngcontent-%COMP%]   .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;height:100%;width:150px;background:linear-gradient(90deg,var(--main-color-opacity) 0%,transparent 100%)}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-of-type(1):checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(calc(0% * (100% / var(--total-radio))))}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-of-type(2):checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(calc(1 * (100% / var(--total-radio))))}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-of-type(3):checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(calc(2 * (100% / var(--total-radio))))}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-of-type(4):checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(calc(3 * (100% / var(--total-radio))))}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-of-type(5):checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(calc(4 * (100% / var(--total-radio))))}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-of-type(6):checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(calc(5 * (100% / var(--total-radio))))}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-of-type(7):checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(calc(6 * (100% / var(--total-radio))))}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-of-type(8):checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(calc(7 * (100% / var(--total-radio))))}.sidebar-radio[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:first-of-type:checked ~ .glider-container[_ngcontent-%COMP%]   .glider[_ngcontent-%COMP%]{transform:translateY(0)}.sidebar-radio[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{color:var(--main-color)}.sidebar-radio[_ngcontent-%COMP%]   label.active[_ngcontent-%COMP%]{color:var(--main-color)!important}.col-md-10.p-4[_ngcontent-%COMP%]{background:linear-gradient(to left,#d7d7ffb3,#c6c6ec80,#b4b4dc4d);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);min-height:100vh;box-shadow:inset -15px 0 20px -10px #9696c833}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{background:linear-gradient(to left,#e6e6ffcc,#d2d2f5b3);border:1px solid rgba(255,255,255,.5);box-shadow:-10px 0 25px -5px #a0a0d266,0 8px 20px #6464961a}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]:after{background:linear-gradient(to bottom,#c6c6eccc,#aaaadc99)}.btn-glass[_ngcontent-%COMP%]{background:linear-gradient(to left,#b4b4dce6,#c6c6eccc);color:#3a3a58;box-shadow:-5px 0 15px -2px #8c8cbe66,0 4px 8px #50507833}.form-glass[_ngcontent-%COMP%]{background:linear-gradient(to left,#f0f0ffe6,#dcdcf0cc);border:1px solid rgba(170,170,210,.6)}router-outlet[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]:hover{background:linear-gradient(to left,#f0f0ffe6,#dcdcf5cc);box-shadow:-15px 0 30px -5px #a0a0d280,0 12px 25px #64649626}.content-heading[_ngcontent-%COMP%]{color:#3a3a5a;text-shadow:1px 1px 3px rgba(220,220,240,.8)}']})};function Pe(o,i){if(o&1&&(n(0,"tr")(1,"td",16),a(2),t(),n(3,"td",17),a(4),t(),n(5,"td",18),a(6),t(),n(7,"td",19),a(8),t(),n(9,"td",20),a(10),t()()),o&2){let e=i.$implicit;s(2),g(e.id),s(2),g(e.name),s(2),g(e.department),s(2),g(e.year),s(2),g(e.credits)}}var K=class o{constructor(i){this.dataService=i}student;courses=[];ngOnInit(){let i=JSON.parse(localStorage.getItem("studentUser")||"{}");i.role==="student"&&i.id&&(this.student=this.dataService.getStudentById(i.id),this.courses=this.student.courses.map(e=>this.dataService.getCourseById(e)).filter(e=>e))}static \u0275fac=function(e){return new(e||o)(x(h))};static \u0275cmp=b({type:o,selectors:[["app-courses"]],standalone:!1,decls:31,vars:1,consts:[[1,"container","mt-4"],[1,"bi","bi-book-fill","me-2","text-primary"],[1,"row","mt-4"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","bg-dark","text-white"],[1,"bi","bi-list-columns-reverse","me-2"],[1,"card-body"],[1,"table","table-striped","align-middle"],[1,"table-dark"],[1,"bi","bi-hash","me-1"],[1,"bi","bi-book","me-1"],[1,"bi","bi-building","me-1"],[1,"bi","bi-calendar","me-1"],[1,"bi","bi-award","me-1"],[4,"ngFor","ngForOf"],["data-label","Course ID"],["data-label","Name"],["data-label","Department"],["data-label","Year"],["data-label","Credits"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h2"),l(2,"i",1),a(3,"My Courses"),t(),n(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),l(8,"i",6),a(9,"Enrolled Courses "),t(),n(10,"div",7)(11,"table",8)(12,"thead",9)(13,"tr")(14,"th"),l(15,"i",10),a(16,"Course ID"),t(),n(17,"th"),l(18,"i",11),a(19,"Name"),t(),n(20,"th"),l(21,"i",12),a(22,"Department"),t(),n(23,"th"),l(24,"i",13),a(25,"Year"),t(),n(26,"th"),l(27,"i",14),a(28,"Credits"),t()()(),n(29,"tbody"),u(30,Pe,11,5,"tr",15),t()()()()()()()),e&2&&(s(30),d("ngForOf",r.courses))},dependencies:[S],styles:[".container[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);background:#ffffff1a;padding:30px;border-radius:20px;box-shadow:0 8px 32px #0003;color:#fff;animation:_ngcontent-%COMP%_fadeIn 1s ease-in-out}h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;text-align:center;margin-bottom:20px;color:#fff}.card[_ngcontent-%COMP%]{background:#ffffff12;border:1px solid rgba(255,255,255,.2);border-radius:15px;box-shadow:0 8px 24px #0000004d;transition:transform .4s ease,box-shadow .4s ease}.card[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 10px 30px #ffffff1a}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f1c2c,#928dab);font-size:1.25rem;font-weight:500;padding:12px;border-radius:15px 15px 0 0;text-align:center}.table[_ngcontent-%COMP%]{margin-top:15px;border-radius:10px;overflow:hidden;background-color:#ffffff08;color:#fff}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2b2b52,#4e54c8);color:#fff;font-weight:600;font-size:1rem;padding:14px;text-align:center;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid rgba(255,255,255,.2);box-shadow:inset 0 -1px #ffffff1a}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .3s ease,transform .3s ease;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#00c6ff,#0072ff);transform:scale(1.01);color:#fff}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:14px;font-size:.95rem;border-bottom:1px solid rgba(255,255,255,.08)}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:15px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right;padding-left:50%;position:relative}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:15px;width:45%;padding-left:15px;font-weight:700;text-align:left}}"]})};var Oe=(o,i,e)=>({"badge-success":o,"badge-warning":i,"badge-danger":e});function Se(o,i){if(o&1&&(n(0,"tr")(1,"td"),a(2),t(),n(3,"td"),a(4),t(),n(5,"td"),a(6),t(),n(7,"td"),a(8),t(),n(9,"td"),a(10),t(),n(11,"td"),a(12),t(),n(13,"td")(14,"span",19),a(15),t()()()),o&2){let e=i.$implicit,r=p();s(2),g(e.course.id),s(2),g(e.course.name),s(2),g(e.course.department),s(2),g(e.course.year),s(2),g(e.course.credits),s(2),g(e.mark),s(2),d("ngClass",Y(8,Oe,e.mark>=75,e.mark>=50&&e.mark<75,e.mark<50)),s(),c(" ",r.getGrade(e.mark)," ")}}var X=class o{constructor(i){this.dataService=i;this.loadStudentData()}student;coursesWithMarks=[];averageMarks=0;ngOnInit(){this.loadStudentData(),window.addEventListener("storage",this.handleStorageEvent.bind(this))}ngOnDestroy(){window.removeEventListener("storage",this.handleStorageEvent.bind(this))}handleStorageEvent(i){(i.key==="studentsData"||i.key==="studentsData_refresh")&&(console.log("Student detected marks update"),this.loadStudentData())}loadStudentData(){let i=localStorage.getItem("studentUser"),e=i?JSON.parse(i):{};if(e.role==="student"&&e.id){let r=localStorage.getItem("studentsData"),m=r?JSON.parse(r):[];this.student=m.find(f=>f.id===e.id),this.student&&this.updateMarksData()}}updateMarksData(){if(!this.student)return;this.coursesWithMarks=this.student.courses.map(e=>{let r=this.dataService.getCourseById(e),m=this.student.marks?.[e]||0;return{course:r,mark:m}}).filter(e=>e.course);let i=this.coursesWithMarks.map(e=>e.mark);i.length>0&&(this.averageMarks=i.reduce((e,r)=>e+r,0)/i.length)}getGrade(i){return i==null?"N/A":i>=90?"A+":i>=80?"A":i>=75?"B+":i>=70?"B":i>=65?"C+":i>=60?"C":i>=55?"D+":i>=50?"D":"F"}static \u0275fac=function(e){return new(e||o)(x(h))};static \u0275cmp=b({type:o,selectors:[["app-mark"]],standalone:!1,decls:43,vars:5,consts:[[1,"container","mt-4"],[1,"bi","bi-journal-check","me-2"],[1,"row","mt-4"],[1,"col-md-12"],[1,"card"],[1,"card-header","bg-dark","text-white"],[1,"bi","bi-graph-up-arrow","me-2"],[1,"card-body"],[1,"alert","alert-info"],[1,"bi","bi-percent","me-2"],[1,"table","table-striped"],[1,"bi","bi-hash","me-1"],[1,"bi","bi-book","me-1"],[1,"bi","bi-building","me-1"],[1,"bi","bi-calendar3","me-1"],[1,"bi","bi-award","me-1"],[1,"bi","bi-pencil-fill","me-1"],[1,"bi","bi-star-fill","me-1"],[4,"ngFor","ngForOf"],[1,"badge",3,"ngClass"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h2"),l(2,"i",1),a(3,"My Marks"),t(),n(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5),l(8,"i",6),a(9,"Marks Summary "),t(),n(10,"div",7)(11,"div",8),l(12,"i",9),a(13,"Your average marks: "),n(14,"strong"),a(15),y(16,"number"),t()(),n(17,"table",10)(18,"thead")(19,"tr")(20,"th"),l(21,"i",11),a(22,"Course Code"),t(),n(23,"th"),l(24,"i",12),a(25,"Course Name"),t(),n(26,"th"),l(27,"i",13),a(28,"Department"),t(),n(29,"th"),l(30,"i",14),a(31,"Year"),t(),n(32,"th"),l(33,"i",15),a(34,"Credits"),t(),n(35,"th"),l(36,"i",16),a(37,"Marks"),t(),n(38,"th"),l(39,"i",17),a(40,"Grade"),t()()(),n(41,"tbody"),u(42,Se,16,12,"tr",18),t()()()()()()()),e&2&&(s(15),c("",U(16,2,r.averageMarks,"1.0-0"),"%"),s(27),d("ngForOf",r.coursesWithMarks))},dependencies:[O,S,R],styles:[".container[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background:#ffffff0d;padding:30px;border-radius:20px;box-shadow:0 8px 32px #00000040;color:#fff;animation:_ngcontent-%COMP%_fadeIn 1s ease}h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:600;text-align:center;color:#fff;margin-bottom:20px}.card[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid rgba(255,255,255,.2);border-radius:15px;box-shadow:0 10px 30px #0000004d;transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 12px 40px #ffffff1a}.card-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e3c72,#2a5298);color:#fff;font-weight:500;font-size:1.2rem;padding:12px;border-radius:15px 15px 0 0;text-align:center}.alert-info[_ngcontent-%COMP%]{background:linear-gradient(90deg,#667eea,#764ba2);color:#fff;font-weight:700;text-align:center;border:none;border-radius:10px;box-shadow:0 0 10px #667eea99}.table[_ngcontent-%COMP%]{margin-top:15px;background-color:#ffffff05;color:#fff;border-radius:10px;overflow:hidden}.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:#fff;font-weight:600;font-size:1rem;padding:14px;text-transform:uppercase;letter-spacing:.5px;text-align:center}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{transition:background .3s ease,transform .3s ease;cursor:pointer}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#ffffff12;transform:scale(1.01)}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px;text-align:center;font-size:.95rem;border-bottom:1px solid rgba(255,255,255,.08)}.badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;font-weight:700;transition:transform .2s,box-shadow .2s}.badge-success[_ngcontent-%COMP%]{background:#00c851;color:#fff;box-shadow:0 0 8px #00c851aa}.badge-warning[_ngcontent-%COMP%]{background:#fb3;color:#fff;box-shadow:0 0 8px #fb3a}.badge-danger[_ngcontent-%COMP%]{background:#f44;color:#fff;box-shadow:0 0 8px #f44a}.badge[_ngcontent-%COMP%]:hover{transform:scale(1.1);box-shadow:0 0 12px #fff6}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.table[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;width:100%}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-bottom:20px;background:#ffffff08;border-radius:10px;padding:10px}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right;padding-left:50%;position:relative}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);position:absolute;left:15px;width:45%;font-weight:700;text-align:left}}"]})};function we(o,i){if(o&1&&(n(0,"p"),a(1),t()),o&2){let e=p(4);s(),c(" Remaining due: \u20B9",e.student.fees.amount," ")}}function Ie(o,i){if(o&1&&(n(0,"div",7)(1,"p"),a(2),t(),u(3,we,2,1,"p",0),t()),o&2){let e=p(3);s(2),c("Payment of \u20B9",e.lastPaymentAmount," successful!"),s(),d("ngIf",e.student.fees.amount>0)}}function Ee(o,i){if(o&1){let e=F();n(0,"div")(1,"div",2)(2,"div",3)(3,"label"),a(4),t(),n(5,"input",4),T("ngModelChange",function(m){M(e);let f=p(2);return L(f.paymentAmount,m)||(f.paymentAmount=m),P(m)}),t()(),n(6,"button",5),N("click",function(){M(e);let m=p(2);return P(m.payFees())}),a(7," Pay Now "),t()(),u(8,Ie,4,2,"div",6),t()}if(o&2){let e=p(2);s(4),c("Amount Due: \u20B9",e.student.fees.amount),s(),H("ngModel",e.paymentAmount),d("max",e.student.fees.amount),s(),d("disabled",!e.paymentAmount||e.paymentAmount<=0),s(2),d("ngIf",e.paymentDone)}}function De(o,i){o&1&&(n(0,"div",8)(1,"p"),a(2,"Your fees are fully paid."),t()())}function Ae(o,i){if(o&1&&(n(0,"div")(1,"h2"),a(2,"Fee Payment"),t(),u(3,Ee,9,5,"div",0)(4,De,3,0,"div",1),t()),o&2){let e=p();s(3),d("ngIf",!e.student.fees.paid&&e.student.fees.amount>0),s(),d("ngIf",e.student.fees.paid||e.student.fees.amount<=0)}}var Z=class o{constructor(i){this.dataService=i;this.loadStudentData(),window.addEventListener("storage",this.handleStorageChange.bind(this)),window.addEventListener("storage",e=>{(e.key==="studentsData"||e.key==="fee_update_trigger")&&this.loadStudentData()})}student;paymentAmount=null;paymentDone=!1;totalFee=5e4;lastPaymentAmount=0;amountDue=0;amountPaid=0;handleStorageChange(i){(i.key==="studentsData"||i.key==="paymentHistory")&&this.loadStudentData()}loadStudentData(){let i=JSON.parse(localStorage.getItem("studentUser")||"{}");if(i.id){let e=JSON.parse(localStorage.getItem("studentsData")||"[]");this.student=e.find(r=>r.id===i.id),this.paymentDone=!1,this.paymentAmount=null}}getDefaultFeeForDepartment(i){return{CSE:5e4,AIML:55e3,IT:52e3,ECE:48e3,EEE:45e3,MECH:4e4,CIVIL:38e3}[i]||5e4}calculateFeeSummary(){if(this.student){this.totalFee=this.student.fees.totalAmount||this.getDefaultFeeForDepartment(this.student.department);let e=JSON.parse(localStorage.getItem("paymentHistory")||"[]").filter(r=>r.type==="college"&&r.studentId===this.student.id).reduce((r,m)=>r+m.amount,0);this.amountPaid=Math.min(e,this.totalFee),this.amountDue=this.totalFee-this.amountPaid,this.student.fees.amount=this.amountDue,this.student.fees.paid=this.amountDue<=0}}payFees(){if(!this.paymentAmount||this.paymentAmount<=0||!this.student)return;let i={studentId:this.student.id,amount:this.paymentAmount,date:new Date().toISOString(),type:"college"},e=JSON.parse(localStorage.getItem("paymentHistory")||"[]");e.push(i),localStorage.setItem("paymentHistory",JSON.stringify(e)),this.student.fees.amount=Math.max(0,this.student.fees.amount-this.paymentAmount),this.student.fees.paid=this.student.fees.amount<=0,this.dataService.updateStudent(this.student),this.lastPaymentAmount=this.paymentAmount,this.paymentDone=!0,this.paymentAmount=null,this.calculateFeeSummary()}static \u0275fac=function(e){return new(e||o)(x(h))};static \u0275cmp=b({type:o,selectors:[["app-fees"]],standalone:!1,decls:1,vars:1,consts:[[4,"ngIf"],["class","fully-paid",4,"ngIf"],[1,"payment-form"],[1,"form-group"],["type","number","placeholder","Enter amount","min","1",3,"ngModelChange","ngModel","max"],[3,"click","disabled"],["class","payment-success",4,"ngIf"],[1,"payment-success"],[1,"fully-paid"]],template:function(e,r){e&1&&u(0,Ae,5,2,"div",0),e&2&&d("ngIf",r.student)},dependencies:[k,V,W,J,$,G,j],styles:["body[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1f1c2c,#928dab);font-family:Segoe UI,sans-serif;color:#d0d0d0;margin:0;padding:0}.payment-form[_ngcontent-%COMP%], .payment-success[_ngcontent-%COMP%], .fully-paid[_ngcontent-%COMP%]{background:#23232399;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:15px;padding:25px;margin-top:20px;box-shadow:0 4px 20px #0000004d;transition:transform .3s ease-in-out;animation:_ngcontent-%COMP%_fadeIn .5s ease-in}.payment-form[_ngcontent-%COMP%]:hover, .payment-success[_ngcontent-%COMP%]:hover{transform:scale(1.02)}h2[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:gold;margin-bottom:20px;text-shadow:1px 1px 3px rgba(0,0,0,.5)}label[_ngcontent-%COMP%]{font-weight:700;color:#222;font-size:18px;display:block;margin-bottom:10px}input[type=number][_ngcontent-%COMP%]{width:100%;padding:10px 15px;font-size:16px;border:none;border-radius:8px;background-color:#eaeaea;color:#333;transition:background-color .3s,transform .2s;box-shadow:inset 2px 2px 6px #0000001a}input[type=number][_ngcontent-%COMP%]:focus{outline:none;background-color:#d3d3d3;transform:scale(1.01)}button[_ngcontent-%COMP%]{margin-top:15px;padding:10px 20px;font-size:16px;background:linear-gradient(135deg,#ff7e5f,#feb47b);color:#111;border:none;border-radius:8px;cursor:pointer;font-weight:700;box-shadow:0 4px 10px #0000004d;transition:background .3s ease,transform .2s ease}button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#feb47b,#ff7e5f);transform:translateY(-2px)}button[_ngcontent-%COMP%]:disabled{background:#888;cursor:not-allowed;opacity:.6}.payment-success[_ngcontent-%COMP%]{color:#28a745;font-weight:700;animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out}.fully-paid[_ngcontent-%COMP%]{color:#ff9800;font-weight:700;animation:_ngcontent-%COMP%_fadeIn .6s ease-in-out}.payment-success[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .fully-paid[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#e1f7d5;margin:8px 0;font-weight:500}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 576px){.payment-form[_ngcontent-%COMP%], .payment-success[_ngcontent-%COMP%], .fully-paid[_ngcontent-%COMP%]{padding:15px}input[type=number][_ngcontent-%COMP%]{font-size:.95rem}h2[_ngcontent-%COMP%]{font-size:22px}}"]})};function Fe(o,i){o&1&&(n(0,"div",5)(1,"div",6)(2,"span",7),a(3,"Loading..."),t()(),n(4,"p",8),l(5,"i",9),a(6,"Loading hostel information..."),t()())}function Ne(o,i){if(o&1){let e=F();n(0,"div",27)(1,"h5",28),l(2,"i",29),a(3,"Pay Hostel Fees"),t(),n(4,"div",18)(5,"div",19)(6,"label",30),a(7,"Amount to Pay (\u20B9)"),t(),n(8,"input",31),T("ngModelChange",function(m){M(e);let f=p(3);return L(f.paymentAmount,m)||(f.paymentAmount=m),P(m)}),t(),n(9,"small",32),a(10),t()(),n(11,"div",33)(12,"button",34),N("click",function(){M(e);let m=p(3);return P(m.payHostelFees())}),l(13,"i",35),a(14,"Make Payment "),t()()()()}if(o&2){let e=p(3);s(8),H("ngModel",e.paymentAmount),d("max",e.student.hostel==null?null:e.student.hostel.fees.amount),s(2),c("Maximum: \u20B9",e.student.hostel==null?null:e.student.hostel.fees.amount),s(2),d("disabled",!e.paymentAmount||e.paymentAmount<=0||e.paymentAmount>(e.student.hostel==null?null:e.student.hostel.fees.amount))}}function He(o,i){if(o&1&&(n(0,"p",40),l(1,"i",43),a(2),t()),o&2){let e=p(4);s(2),c("Remaining balance: \u20B9",e.student.hostel==null?null:e.student.hostel.fees.amount," ")}}function Le(o,i){o&1&&(n(0,"p",15),l(1,"i",44),a(2,"Your hostel fees are fully paid! "),t())}function Te(o,i){if(o&1&&(n(0,"div",36)(1,"div",37),l(2,"i",38),n(3,"div")(4,"h5",39),a(5,"Payment Successful!"),t(),n(6,"p",40),a(7),t(),u(8,He,3,1,"p",41)(9,Le,3,0,"p",42),t()()()),o&2){let e=p(3);s(7),c("\u20B9",e.lastPaymentAmount," has been paid towards hostel fees."),s(),d("ngIf",(e.student.hostel==null?null:e.student.hostel.fees.amount)>0),s(),d("ngIf",e.student.hostel==null?null:e.student.hostel.fees.paid)}}function Ye(o,i){if(o&1&&(n(0,"div",13)(1,"div",14)(2,"h5",15),l(3,"i",16),a(4,"Your Hostel Details"),t()(),n(5,"div",17)(6,"div",18)(7,"div",19)(8,"p"),l(9,"i",20),n(10,"strong"),a(11,"Room Number:"),t(),a(12),t(),n(13,"p"),l(14,"i",21),n(15,"strong"),a(16,"Block:"),t(),a(17),t()(),n(18,"div",19)(19,"p"),l(20,"i",22),n(21,"strong"),a(22,"Hostel Fee Status:"),t(),n(23,"span",23),a(24),t()(),n(25,"p"),l(26,"i",24),n(27,"strong"),a(28,"Amount Due:"),t(),a(29),t()()(),u(30,Ne,15,4,"div",25)(31,Te,10,3,"div",26),t()()),o&2){let e=p(2);s(12),C(" ",e.student.hostel==null?null:e.student.hostel.block,"-",e.student.hostel==null?null:e.student.hostel.roomNo),s(5),c(" ",e.student.hostel==null?null:e.student.hostel.block),s(6),v("text-success",e.student.hostel==null?null:e.student.hostel.fees.paid)("text-danger",!(e.student.hostel!=null&&e.student.hostel.fees.paid)),s(),c(" ",e.student.hostel!=null&&e.student.hostel.fees.paid?"Paid":"Pending"," "),s(5),c(" \u20B9",(e.student.hostel==null?null:e.student.hostel.fees.amount)||0),s(),d("ngIf",!(e.student.hostel!=null&&e.student.hostel.fees.paid)),s(),d("ngIf",e.paymentDone)}}function Be(o,i){o&1&&(n(0,"div",45)(1,"div",37),l(2,"i",46),n(3,"div")(4,"h5",39),a(5,"No Hostel Allocation"),t(),n(6,"p",15),a(7,"You are not currently allocated to any hostel. Please contact the admin office."),t()()()())}function Ue(o,i){if(o&1&&(n(0,"div")(1,"h2",10),l(2,"i",11),a(3,"Hostel Information"),t(),u(4,Ye,32,11,"div",12)(5,Be,8,0,"ng-template",null,0,se),t()),o&2){let e=oe(6),r=p();s(4),d("ngIf",r.student.hostel==null?null:r.student.hostel.allocated)("ngIfElse",e)}}function Re(o,i){o&1&&(n(0,"div",47)(1,"div",37),l(2,"i",48),n(3,"div")(4,"h5",39),a(5,"Error Loading Data"),t(),n(6,"p",15),a(7,"Could not load your hostel information. Please try again later."),t()()()())}var ee=class o{constructor(i){this.dataService=i}student=null;paymentAmount=null;paymentDone=!1;lastPaymentAmount=0;isLoading=!0;ngOnInit(){this.loadStudentData(),window.addEventListener("storage",this.handleStorageChange.bind(this))}ngOnDestroy(){window.removeEventListener("storage",this.handleStorageChange.bind(this))}loadStudentData(){this.isLoading=!0,console.log("--- Loading student data ---");let i=JSON.parse(localStorage.getItem("studentUser")||"{}");console.log("Current user:",i);let e=this.dataService.getStudents();console.log("All students from service:",e),this.student=e.find(r=>r.id===i.id)||null,console.log("Found student record:",this.student),this.student?(console.log("Hostel status:",this.student.hostel?"Allocated":"Not allocated"),this.student.hostel&&console.log("Hostel details:",{room:this.student.hostel.roomNo,block:this.student.hostel.block,fees:this.student.hostel.fees})):console.warn("No student found with ID:",i.id),this.isLoading=!1}handleStorageChange(i){i.key==="studentsData"&&this.loadStudentData()}payHostelFees(){if(!(!this.paymentAmount||this.paymentAmount<=0||!this.student?.hostel)){if(this.paymentAmount>this.student.hostel.fees.amount){alert("Payment amount cannot exceed due amount");return}this.dataService.payHostelFees(this.student.id,this.paymentAmount),this.lastPaymentAmount=this.paymentAmount,this.paymentDone=!0,this.paymentAmount=null,this.loadStudentData()}}static \u0275fac=function(e){return new(e||o)(x(h))};static \u0275cmp=b({type:o,selectors:[["app-hostel"]],standalone:!1,decls:4,vars:3,consts:[["notAllocated",""],[1,"container","fade-in"],["class","alert alert-info text-center glass-card",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger glass-card fade-in",4,"ngIf"],[1,"alert","alert-info","text-center","glass-card"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"bi","bi-hourglass-split","me-2"],[1,"mb-4","text-white"],[1,"bi","bi-house-door-fill","me-2"],["class","glass-card fade-in mb-4",4,"ngIf","ngIfElse"],[1,"glass-card","fade-in","mb-4"],[1,"bg-primary","text-white","rounded-top","px-3","py-2"],[1,"mb-0"],[1,"bi","bi-info-circle-fill","me-2"],[1,"card-body","pt-3"],[1,"row"],[1,"col-md-6"],[1,"bi","bi-door-open","me-2","text-secondary"],[1,"bi","bi-building","me-2","text-secondary"],[1,"bi","bi-cash-stack","me-2","text-secondary"],[1,"fw-bold"],[1,"bi","bi-currency-rupee","me-2","text-secondary"],["class","mt-4 border-top pt-3",4,"ngIf"],["class","alert alert-success mt-4 glass-card",4,"ngIf"],[1,"mt-4","border-top","pt-3"],[1,"mb-3"],[1,"bi","bi-credit-card-2-front-fill","me-2"],[1,"form-label"],["type","number","min","1","placeholder","Enter amount",1,"form-control",3,"ngModelChange","ngModel","max"],[1,"text-muted"],[1,"col-md-6","d-flex","align-items-end"],[1,"btn","btn-glass",3,"click","disabled"],[1,"bi","bi-wallet-fill","me-2"],[1,"alert","alert-success","mt-4","glass-card"],[1,"d-flex","align-items-center"],[1,"bi","bi-check-circle-fill","me-2","fs-4"],[1,"alert-heading"],[1,"mb-1"],["class","mb-1",4,"ngIf"],["class","mb-0",4,"ngIf"],[1,"bi","bi-exclamation-circle","me-1","text-warning"],[1,"bi","bi-emoji-smile","me-1","text-success"],[1,"alert","alert-warning","glass-card","fade-in"],[1,"bi","bi-exclamation-triangle-fill","me-2","fs-4"],[1,"alert","alert-danger","glass-card","fade-in"],[1,"bi","bi-exclamation-octagon-fill","me-2","fs-4"]],template:function(e,r){e&1&&(n(0,"div",1),u(1,Fe,7,0,"div",2)(2,Ue,7,2,"div",3)(3,Re,8,0,"div",4),t()),e&2&&(s(),d("ngIf",r.isLoading),s(),d("ngIf",!r.isLoading&&r.student),s(),d("ngIf",!r.isLoading&&!r.student))},dependencies:[k,V,W,J,$,G,j],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background:linear-gradient(135deg,#1e1e2f,#121212);color:#f5f5f5}.glass-card[_ngcontent-%COMP%]{background:#ffffff12;border:1px solid rgba(255,255,255,.1);border-radius:20px;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);box-shadow:0 8px 30px #0000004d;padding:20px;transition:all .4s ease-in-out;transform:scale(1)}.glass-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px) scale(1.01);box-shadow:0 12px 40px #0006;border-color:#fff3}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .6s ease forwards}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.btn-glass[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00c6ff,#0072ff);color:#fff;border:none;padding:10px 18px;border-radius:8px;transition:all .3s ease-in-out;font-weight:600}.btn-glass[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#0072ff,#00c6ff);transform:scale(1.05);box-shadow:0 0 12px #007bff99}.alert[_ngcontent-%COMP%]{border-radius:15px;transition:transform .3s,box-shadow .3s}.alert[_ngcontent-%COMP%]:hover{transform:scale(1.01);box-shadow:0 0 10px #ffffff14}.alert-success[_ngcontent-%COMP%]{background:#28a74526;color:#28a745}.alert-danger[_ngcontent-%COMP%]{background:#dc354526;color:#dc3545}.alert-warning[_ngcontent-%COMP%]{background:#ffc10726;color:#ffc107}.alert-info[_ngcontent-%COMP%]{background:#17a2b826;color:#17a2b8}input.form-control[_ngcontent-%COMP%]{background:#ffffff1a;border:1px solid rgba(255,255,255,.2);transition:all .3s ease}input.form-control[_ngcontent-%COMP%]:focus{border-color:#00c6ff;background:#fff3;outline:none;box-shadow:0 0 10px #00c6ff66}.custom-input[_ngcontent-%COMP%]::placeholder{color:#28a745;opacity:1}.custom-input[_ngcontent-%COMP%]{background-color:#f3f6fc;color:#28a745}"]})};var ze=(o,i,e)=>({"bi-check-circle-fill":o,"bi-clock-fill":i,"bi-x-circle-fill":e});function Ve(o,i){if(o&1&&(n(0,"div",9)(1,"div",10)(2,"div",11)(3,"h5",12),l(4,"i",13),a(5),t(),n(6,"p",14),l(7,"i",15),a(8),n(9,"span",16),l(10,"i",17),a(11),t()(),n(12,"p",14),l(13,"i",18),a(14),t()()()()),o&2){let e=i.$implicit;s(),v("bg-success",e.status==="Good")("bg-warning",e.status==="Warning")("bg-danger",e.status==="Danger"),s(4),c("",e.courseName," "),s(3),c("Attendance: ",e.percentage,"% "),s(3),c("",e.status," "),s(3),C(" ",e.presentClasses," of ",e.totalClasses," classes ")}}function Je(o,i){if(o&1&&(n(0,"tr")(1,"td",24),a(2),t(),n(3,"td")(4,"span"),l(5,"i",25),a(6),y(7,"titlecase"),t()()()),o&2){let e=i.$implicit;s(2),g(e.date),s(2),v("text-success",e.status==="present")("text-warning",e.status==="late")("text-danger",e.status==="absent"),s(),d("ngClass",Y(11,ze,e.status==="present",e.status==="late",e.status==="absent")),s(),c(" ",B(7,9,e.status)," ")}}function je(o,i){if(o&1&&(n(0,"div",2)(1,"div",3)(2,"h4"),l(3,"i",19),a(4),t()(),n(5,"div",5)(6,"table",20)(7,"thead")(8,"tr")(9,"th"),l(10,"i",21),a(11,"Date"),t(),n(12,"th"),l(13,"i",22),a(14,"Status"),t()()(),n(15,"tbody"),u(16,Je,8,15,"tr",23),t()()()()),o&2){let e=i.$implicit,r=p();s(4),c("",e.name," Attendance Details"),s(12),d("ngForOf",r.getAttendanceByCourse(e.id))}}var te=class o{constructor(i){this.dataService=i;let e=JSON.parse(localStorage.getItem("studentUser")||"{}");this.studentId=e.id}attendanceRecords=[];studentId;courses=[];attendanceSummary=[];ngOnInit(){this.loadAttendanceData(),window.addEventListener("storage",()=>this.loadAttendanceData())}loadAttendanceData(){let i=JSON.parse(localStorage.getItem("studentsData")||"[]"),e=JSON.parse(localStorage.getItem("coursesData")||"[]"),r=i.find(f=>f.id===this.studentId);this.attendanceRecords=r?.attendance||[];let m=[...new Set(this.attendanceRecords.map(f=>f.courseId))];this.courses=m.map(f=>{let ae=e.find(fe=>fe.id===f);return ae?{id:ae.id,name:ae.name}:{id:0,name:"Unknown Course"}}),this.loadAttendanceSummary()}getAttendanceByCourse(i){return this.attendanceRecords.filter(e=>e.courseId===i)}loadAttendanceSummary(){this.attendanceSummary=this.courses.map(i=>{let e=this.getAttendanceByCourse(i.id),r=e.filter(f=>f.status==="present").length,m=e.length>0?Math.round(r/e.length*100):0;return{courseId:i.id,courseName:i.name,totalClasses:e.length,presentClasses:r,percentage:m,status:m>=75?"Good":m>=50?"Warning":"Danger"}})}static \u0275fac=function(e){return new(e||o)(x(h))};static \u0275cmp=b({type:o,selectors:[["app-attendances"]],standalone:!1,decls:13,vars:2,consts:[[1,"container","mt-4"],[1,"bi","bi-calendar-check-fill","me-2"],[1,"card","mt-3"],[1,"card-header"],[1,"bi","bi-graph-up-arrow","me-2"],[1,"card-body"],[1,"row"],["class","col-md-4 mb-3",4,"ngFor","ngForOf"],["class","card mt-3",4,"ngFor","ngForOf"],[1,"col-md-4","mb-3"],[1,"card"],[1,"card-body","text-white"],[1,"card-title"],[1,"bi","bi-book-fill","me-2"],[1,"card-text"],[1,"bi","bi-percent","me-1"],[1,"badge","bg-light","text-dark","ms-2"],[1,"bi","bi-info-circle-fill","me-1"],[1,"bi","bi-clipboard-check","me-1"],[1,"bi","bi-journal-check","me-2"],[1,"table","table-striped"],[1,"bi","bi-calendar-date","me-1"],[1,"bi","bi-person-check-fill","me-1"],[4,"ngFor","ngForOf"],[1,"date"],[1,"me-1",3,"ngClass"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"h2"),l(2,"i",1),a(3,"My Attendance Records"),t(),n(4,"div",2)(5,"div",3)(6,"h4"),l(7,"i",4),a(8,"Attendance Summary"),t()(),n(9,"div",5)(10,"div",6),u(11,Ve,15,11,"div",7),t()()(),u(12,je,17,2,"div",8),t()),e&2&&(s(11),d("ngForOf",r.attendanceSummary),s(),d("ngForOf",r.courses))},dependencies:[O,S,le],styles:["body[_ngcontent-%COMP%]{background:linear-gradient(to right,#1c1c1c,#2e2e2e);color:#e0e0e0;font-family:Segoe UI,sans-serif;padding:20px}h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{color:#f8b400;text-shadow:1px 1px 4px #000}.card[_ngcontent-%COMP%]{background:#1e1e1e99;border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 16px #00000080;border-radius:16px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);transition:transform .3s ease,box-shadow .3s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px) scale(1.01);box-shadow:0 12px 24px #ffc80033}.card-header[_ngcontent-%COMP%]{background-color:#0000004d;color:#fc0;font-weight:600;border-bottom:1px solid rgba(255,255,255,.1);border-radius:16px 16px 0 0}.card-body[_ngcontent-%COMP%]{color:#d4d4d4}.card-title[_ngcontent-%COMP%]{color:#f2a541;font-weight:600}.card-text[_ngcontent-%COMP%]{color:#bbb}.table[_ngcontent-%COMP%]{color:#ccc}.table-striped[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#ffffff0d}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#f39c12;background-color:#0006;border:none}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#ddd;border-color:#ffffff1a}.text-success[_ngcontent-%COMP%]{color:#4caf50!important}.text-warning[_ngcontent-%COMP%]{color:#ff9800!important}.text-danger[_ngcontent-%COMP%]{color:#f44336!important}.bg-success[_ngcontent-%COMP%]{background-color:#4caf504d!important}.bg-warning[_ngcontent-%COMP%]{background-color:#ff98004d!important}.bg-danger[_ngcontent-%COMP%]{background-color:#f443364d!important}.badge[_ngcontent-%COMP%]{font-size:.8rem;padding:.4em .7em;border-radius:8px;background-color:#444;color:#ffeb3b}.btn[_ngcontent-%COMP%]{background:linear-gradient(to right,#f57c00,#e65100);border:none;color:#fff;padding:10px 20px;border-radius:12px;font-weight:700;transition:all .3s ease-in-out;box-shadow:0 4px 12px #0000004d}.btn[_ngcontent-%COMP%]:hover{background:linear-gradient(to right,#ffa726,#fb8c00);transform:scale(1.05);box-shadow:0 6px 18px #ffc80066}@keyframes _ngcontent-%COMP%_pulse{0%{box-shadow:0 0 #ffc10766}70%{box-shadow:0 0 0 10px #ffc10700}to{box-shadow:0 0 #ffc10700}}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}.date[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#66ffe0;animation:_ngcontent-%COMP%_pulseColor 3s infinite;transition:color .4s ease-in-out}@keyframes _ngcontent-%COMP%_pulseColor{0%{color:#66ffe0}50%{color:#00e6b8}to{color:#1de9b6}}"]})};var We=[{path:"",component:q,children:[{path:"studenthome",component:Q},{path:"courses",component:K},{path:"marks",component:X},{path:"fees",component:Z},{path:"hostel",component:ee},{path:"attendances",component:te}]}],ne=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=A({type:o});static \u0275inj=D({imports:[ie.forChild(We),ie]})};var pe=class o{static \u0275fac=function(e){return new(e||o)};static \u0275mod=A({type:o});static \u0275inj=D({providers:[h],imports:[ce,ue,ne]})};export{pe as StudentModule};
